// SPDX-License-Identifier: UNLICENSED
pragma solidity >=0.7.0 <0.9.0;

contract Bank {
    mapping(address => uint) private user_account;
    mapping(address => bool) private user_exists;

    // Create an account (optional initial deposit)
    function create_account() public payable returns (string memory) {
        require(!user_exists[msg.sender], "Account already exists!");
        user_account[msg.sender] = msg.value;
        user_exists[msg.sender] = true;
        return "Account creation successful!";
    }

    // Deposit Ether into your account
    function deposit() public payable returns (string memory) {
        require(user_exists[msg.sender], "Account does not exist!");
        require(msg.value > 0, "Deposit amount must be greater than 0");
        user_account[msg.sender] += msg.value;
        return "Amount deposited successfully!";
    }

    // Withdraw Ether from your account
    function withdraw(uint amount) public returns (string memory) {
        require(user_exists[msg.sender], "Account does not exist!");
        require(amount > 0, "Amount must be greater than 0");
        require(amount <= user_account[msg.sender], "Insufficient balance!");

        user_account[msg.sender] -= amount;
        payable(msg.sender).transfer(amount);

        return "Amount withdrawn successfully!";
    }

    // View balance (in wei)
    function show_balance() public view returns (uint) {
        return user_account[msg.sender];
    }

    // Contract balance (for admin/debugging)
    function bank_balance() public view returns (uint) {
        return address(this).balance;
    }
}
